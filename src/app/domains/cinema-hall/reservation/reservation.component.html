<main>
  <div class="conainer-info" *ngIf="reservation$ | async as reservation">
    <h1>
      {{ reservation.day }} {{ reservation.hour }} {{ reservation.title }}
    </h1>
  </div>
  <div class="container-places">
    <!--
       <div
      class="container-places__seat"
      *ngFor="let seat of seats; let i = index"
    >
      <div
        [style.backgroundColor]="styleArray[i] ? '#5800ff' : 'grey'"
        *ngIf="seat.avaliable === true; else elseBlock"
        (click)="addSeat(seat.seat, i, styleArray[i])"
        (click)="changeColor(i)"
        class="container-places__seat--active"
      >
        {{ seat.seat }}
      </div>
      <ng-template #elseBlock>
        <div class="container-places__seat--unactive">
          {{ seat.seat }}
        </div>
      </ng-template>
      {{ i }}
    </div>
    -->
    <div
      class="container-places__seat"
      *ngFor="let seat of seats; let i = index"
    >
      <ng-container *ngIf="reservedSeats$ | async as reserv">
        <ng-container *ngFor="let ticket of reserv">
          <div
            [style.backgroundColor]="ticket[i] ? '#5800ff' : 'grey'"
            class="container-places__seat--active"
            *ngIf="seat.avaliable === true; else elseBlock"
            (click)="addSeat(seat.seat, i, ticket[i])"
            (click)="changeColor(i)"
          >
            {{ seat.seat }}
          </div>
        </ng-container>
      </ng-container>

      <ng-template #elseBlock>
        <div class="container-places__seat--unactive">
          {{ seat.seat }}
        </div>
      </ng-template>
      <!-- <div *ngIf="tickets$ | async as tickets">

        <div *ngFor="let ticket of tickets">
          <div
            [style.backgroundColor]="
              styleArray[ticket.position] ? 'grey' : '#5800ff'
            "
            *ngIf="seat.avaliable === true; else elseBlock"
            (click)="addSeat(seat.seat, i, styleArray[i])"
            (click)="changeColor(i)"
            class="container-places__seat--active"
          >
            {{ seat.seat }}
          </div>
          <ng-template #elseBlock>
            <div class="container-places__seat--unactive">
              {{ seat.seat }}
            </div>
          </ng-template>
        </div>
        <div
          *ngIf="seat.avaliable === true; else elseBlock"
          (click)="addSeat(seat.seat, i, styleArray[i])"
          (click)="changeColor(i)"
          class="container-places__seat--active"
        >
          {{ seat.seat }}
        </div>
        <ng-template #elseBlock>
          <div class="container-places__seat--unactive">
            {{ seat.seat }}
          </div>
        </ng-template>
      </div> -->
    </div>
  </div>
  <div *ngIf="tickets$ | async as tickets">
    <div *ngFor="let ticket of tickets" class="container-tickets">
      Rząd {{ ticket.seat[0] }} Miejsce {{ ticket.seat[1] }}
      <select
        #ticketType
        (change)="changeKey(ticket.position, ticketType.value)"
      >
        <option *ngFor="let ticketType of ticketTypeArray[0] | keyvalue">
          {{ ticketType.key }} {{ ticketType.value }}zł
        </option>
      </select>
      <div>
        <i-feather
          name="trash-2"
          (click)="removeTicket(ticket.position)"
          (click)="changeColor(ticket.position)"
        ></i-feather>
      </div>
    </div>
  </div>
  <!---
    <div class="container-tickets" *ngFor="let ticket of tickets">
    <div>
      <p>Rząd {{ ticket.seat[0] }} Miejsce {{ ticket.seat[1] }}</p>
    </div>
    <div>
      <select #ticketType (change)="changeKey(ticket.seat, ticketType.value)">
        <option *ngFor="let plsWork of test2[0] | keyvalue">
          {{ plsWork.key }} {{ plsWork.value }}zł
        </option>
      </select>
    </div>
    <div>
       <i-feather
        name="trash-2"
        (click)="removeSeat(ticket.seat)"
        (click)="changeColor(ticket.position)"
      ></i-feather>
    </div>
  </div>
  --->
  <!--



  <div class="container-next">
    <div class="container-next" *ngIf="tickets.length !== 0; else elseBlock">
     
    </div>
    <ng-template #elseBlock>
      <button class="disabled">Kup bilety by przejść dalej</button></ng-template
    >
    <ng-template #elseBlock1>
      Hola, hola, dla więcej niż 10 osób napisz na ten adres: adres@gmail.com
    </ng-template>
  </div>
-->
  <div class="container-next">
    <button class="conainer-next__btn" routerLink="/formularz">Dalej</button>
  </div>
</main>
