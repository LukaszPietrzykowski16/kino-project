<form [formGroup]="screeningForm">
  <div class="container">
    <h1>Dodaj seans</h1>
    <div class="event-type-form__toggle-container">
      <h3 class="event-type-form__question font-heading-3">
        {{ questions[page] }}
      </h3>
      <mat-form-field *ngIf="page === 0" appearance="fill">
        <mat-label>Choose a date</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="date" />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <div *ngIf="page === 1">
        <mat-form-field appearance="fill">
          <mat-label>Wybierz film</mat-label>
          <mat-select>
            <ng-container *ngIf="allFilms$ | async as films">
              <ng-container *ngIf="array$ | async as arr">
                <ng-container *ngFor="let film of films; let i = index">
                  <ng-container *ngIf="arr[i] !== film.id">
                    <mat-option
                      value="{{ film.title }}"
                      (click)="setValue(film.id)"
                    >
                      <p>{{ film.title }}</p>
                    </mat-option>
                  </ng-container>
                </ng-container>
              </ng-container>
            </ng-container>
          </mat-select>
        </mat-form-field>
        <mat-checkbox
          class="example-margin"
          [(ngModel)]="checked"
          formControlName="premier"
        >
          premiera
        </mat-checkbox>
      </div>

      <form [formGroup]="skillsForm" *ngIf="page === 2">
        <button type="button" (click)="addSkills()">Dodaj godzinę</button>
        <div formArrayName="skills">
          <div *ngFor="let skill of skills.controls; let i = index">
            <div [formGroupName]="i">
              Godzina seansu:
              <mat-form-field>
                <input type="text" formControlName="exp" matInput />
              </mat-form-field>
              <button (click)="removeSkill(i)">Usuń</button>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="event-type-form__button-container">
      <button
        class="event-type-form__button"
        [ngClass]="{ 'event-type-form__button--hidden': !page }"
        mat-flat-button
        color="primary"
        (click)="previousPage()"
      >
        Wróć
      </button>
      <button
        class="event-type-form__button"
        mat-flat-button
        color="primary"
        (click)="nextPage()"
      >
        Dalej
      </button>
    </div>
  </div>
</form>
